# PHP 中级软件工程师

## isset()与empty()的本质区别是什么？请举例说明两种函数在不同变量状态下的返回值差异

（考察变量判断机制及类型转换理解）

## 请解释SESSION与COOKIE的协同工作原理，并说明如何通过PHP配置实现分布式会话共享

（重点考察会话管理机制与分布式系统认知）

## 在Laravel中实现一个带速率限制的API路由

- 要求：每分钟最多允许同一IP请求60次
- 需说明中间件配置方式及底层实现原理
（检验框架使用深度与安全防护意识）

## 对比ThinkPHP与Laravel的服务容器实现差异，举例说明依赖注入的最佳实践场景

（框架设计理念与架构能力考察）

## 设计一个秒杀场景的库存扣减方案

- 要求：解决超卖问题
- 可选技术：Redis原子操作/悲观锁/队列
- 需说明不同方案的性能差异及适用场景
（高并发解决方案设计能力）

## 当MySQL QPS达到5000+时，请列举至少三种有效的数据库优化策略，并解释原理

（分库分表/读写分离/缓存策略等实战经验）

## 缓存穿透的防御方案

- 布隆过滤器实现原理
- 空值缓存策略的优缺点
- 如何设计具有过期时间的伪空值缓存
（穿透/击穿/雪崩的深度辨析）

答案：

| 方案       | 实现方式                   | 缺点                   |
| :--------- | :------------------------- | :--------------------- |
| 布隆过滤器 | 哈希位图判断key是否存在    | 存在误判率             |
| 空值缓存   | 缓存null值并设置短过期时间 | 可能被恶意攻击填充缓存 |

## 用Redis实现分布式锁时，如何处理以下问题

- 锁自动释放（EX参数）
- 误删其他线程锁（Value校验）
- 锁续期机制（Redisson看门狗原理）
（分布式系统核心问题实战）

答案：

- 锁自动释放：SET lock_key uuid NX EX 30
- 防误删锁：删除前校验value是否为当前线程UUID
- 锁续期：启动后台线程每10秒续期（Redisson看门狗机制）

## 现有SQL语句产生笛卡尔积

```sql
SELECT * FROM users,orders WHERE users.status=1;
```

- 分析性能问题成因
- 给出三种优化方案（JOIN优化/索引设计/查询重构）
（SQL执行原理与优化能力）

答案:

- 问题分析：
  - 缺少JOIN条件导致users×orders全表乘积
- 优化方案：
  - 添加关联条件：ON users.id=orders.user_id
  - 使用显式JOIN代替隐式连接
  - 对users.status字段建立索引
